import React, {useState} from 'react';
import {
  SafeAreaView,
  ScrollView,
  View,
  Text,
  TouchableOpacity,
  FlatList,
  Image,
  Dimensions,
} from 'react-native';

import {storage, database} from '../Setup';
import Spinner from '../src/components/Spinner';

export default function CloudStorageScreen({navigation}) {
  const storageRef = storage().ref('images/tempImage3.png');
  const [allImages, setAllImages] = useState([]);

  //base64 image
  const dataURL =
    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAASKADAAQAAAABAAAASAAAAACQMUbvAAA0FUlEQVR4AbVcB3gWxdZ+v5bee0+AhBICAqH3XqVJla6gqIiIBVQsSBUuoAgCYqMoAtJ76CV0QkJJAoT03nv72vzvbICrXtR7/+sdnv12s7tzZubM6ecsKvxvmopg1TwED/PjIZyc4NSvNRoP660Ot3e0CXVysA1x97D3S8uxcCmv1doaTVqtfFenMRntLA2VAZ61RXn5FRklpdUPSwrK4q7H4eaBY4hLKUHJY5g8y7E0PEw85Hh/a5PA/872GDFyskqbOgTBw3ugT3jrwN55VUGtH2br/DMKtariMjNMBiNXpoeFpYCVBVcqe3OJgmvWGwVqqlVctQ4anQWc7IEgbxPqeRjS3SySbkTfzTy566j5xKZDSHg0lDxJRMkN+dsQ9XchSMKRkzPykM325EYMa9oiZGJiYXD3m/d1lgVFNXCwqoabg4kIUZnLKq1FeY2dqrTCEoUVVqpqvaWqsroOrzqtGY62QjjbVAkH2xp4Out5rlKVlxvV+aVqVNTawNXFCi0bGfT1nR+ej4tJ2Pr8h9hbUIDyuuEhKfFvoai/A0GPyRttG8P1wNd4qVDVdtrZO94N0jL08HIoQT1flTG32EkVk+ypinloq84q1KG61hIlWVHc72poLexgMpvh5NMKQphRnhMDlVoHS5empCUVKvKiyXZ6NGrcAO2aCfMzQbnCx7lEpOWatRnFjvD1tEDfNtXJzsZT3w6YZt4Y9QAFjxD1ZG6P/v6PT/8NgmRfKWfkTuli9+BVnc/gd348rvE31ZSiTaMKU16lC87EBKhPX65RlVdpYefsC0udgLW1BsVZsVi+4E0M7NEcBqMJB0/dxqefbUBpbjzyU64i9kEmeg4cD1efRnj1xdEwknG+Wv8dqccatdXlsLMB+nb1EH3bZZmdLfNx/Z6dRmvtiIn9zBmV6QdWthyFdZyXnsd/xXb/XwRJxCjCd/Fr6DFt6qB/fH/cMjw/rwgD25cbY1L91ZuPuquzil1g0pegbZtm0NeU42FiKmwc3KHR6JAUvQ+FqZfw9bYLiI5NxtbPX4JaZ4f2/abj0qGVqKrWw69Jb9g7eSI15hes/PYk3p7WG43bT8CE8WNw+34W9mxZAbVdCMKaBWNMjzRz6/oZ5qNX7bTObi6Y1t8Qc+7AoXfHzMdJzlW2J3Ou+/Pf+5Wd/tP2eEesDDHaFR36Dz8992tTeMuAZGOj+nZi1oaO2k+/dVcXF5N1auKhL4nF6xO74Mimt0kZV2BpZQu1SkNkWGNPRDReHtcFXds1QV5hOYSxEju//QiHTt+BWq1Co9AWcHGmdGb7eu1y5Vy/YXMcPnYWO9dOh7EsAS9NHYf7ty5j2bYg9Zsbu2tDg11E66AU47yNphb2of1PGO75fcGOpDdlQ+Xc/6dNUcOTBqJhUfyIK7PnjhBL5rc3XTzY2dRl6KvCIXSWCOjwrvAOHSxku5+UK7WJCO87S/nbxq2psPbuJHzDX+G5q9gbES3iErKFb0gH5fkr87Yp56lztijnrXuvig9W7BNlFTWCLCi++P60cAzsKaxdgpXnI6evEp0Hv61ct+r3rtA5hQqVczvRYeB0cW5vR9OKxR1Mb7z9nCi8O+z6xEFo8ggzyhr+F1hSAP9jJnonXh6dP2bSEHF6Z3PD0qVjhXXgc8LGp5sIbDVe+LSaKhq0fUFk55WKyBuJ4u6DLAVJchUzPv5ZfL3tvPjk8/3C1qezGP/mRlFQXCFi4jLEqOlfivD+74jB074SUFuIJl2mi5XfHBcnI2PF2NfXKffcmowRNr5dxeffnVKQIpH/yryflGsLW08RdTdN7Dh0VVh7hAuXZjPFkiXjxNldzQ1jJw8WCRfHFK56A/3/V0hSkHN7O8ZHnxlvGDOpr7hzopVx8ITXhWXAWNGs2zRlkvKnQfuXhHNgV5FfVCF+3HdVuX/qYrz4aMVe5Xrn4Zui7bBVwqHJq8K2/vPCwq2NsPXtLFwajyZlvSY8mk0RYQOWinod3hB2gYOEtd8gYd/wBRHUbakI7bdEoSAJaOrcLU8QHxDaW7z6YR31/XLkpsjKLRFaO3+h835W9Bszg3MNN46d1FtEnRpnursDk/8TJP075CbfMSbtw7QM3ahvvtuaIeaOM5qHf9JOk5GeCitVMW6fvYBXPtyGM6dPwqg3oqokFW7OtsgrKIeVgy9Wrv0JG77bjsWfvke9ko96wYEY2soG7VvUYsepQMTmh8HDmeulildpPKCvrURxlS2aN7TGuD7JuHqrBLEpycjKcAWs66Pls8uREhuBmZ/+rKy1fqNWSEu+r8ixAydvgRuCV95agQBvO8yZMRz3kiZp9iy4b/5qe4ZqwqARmxL37rZpMBzr2VlZ2yOEPfX0V1pMAfDLCoz3Ch3149b9ueapg1WqIR82ValVJsx7czTemDaMmqoMA8Z9gmM/L1DUdXp2MYxGA9Z/twtpWWXQF8ehcQNrDOlSiylD7BDcsBXg1ofTa4CcGxMx4h0T7uc1hFlLBLCpjUUIcU/ArmUm+Lb/iduTAhQcxf24a9h6RI9fTgjkVjWAm18LFCQewtH9P0Kn1eHNOQsReexbWuQqeDfsjaz7JxRzodug6VDb+OPA4ntiyxGTefQAL01Jwi8vDH8bmzjcXyKJ7zy1KRJ/9mj0vn5ipH7a9B6mK4c6mz1bzhYNe84nqfdSWObG7RRRP6zuevLs75V7k976VlD9CtfGz4t+z3YWB35oKUT2G0IYDwhhSlLeOXtmlYi9U8cWonCuOPNzS7HovXCxYE64OPFjKyHy64Tv3dvbROSF1Uofpa+EkTNbHPi+hejaI1zYBw4Q9v69xcWoBOWdld8Qe6TFF+dsVf4+ERkvVmyMEI7Bw4V7i7fEpYPdzNNf6Wa6fGy4cf70JzLpP9ZuivoPD0ODpKvjCie82F/cPNbO5B0+S9gHDRJezSeL4G4fCK2NlzKJpeuOidB2o0QhBe6wl9YIjVNz0aF7T7FzfVMhiubQOL5NxOQKU+0NYao+zOt7YtniMeL2zXUi4vA8UVubyXeKCOs6jygehcJgKBQRRz8Ud6LXic8WjWKf+8JUdViBIWEJc5wQxe+L/d83E2GtwoXGsZnwbzVZWLs3F33HLVXmFdZlqtDYBYigDrNEaN9PRUiPT4R3+GwRdbSTadLUfuaEK88X92iNRo/I46kmz9NY7LGFrCm+O/LiqysNreeNSzeNWthFk5YUi6snN+HT1QdxeO8PcPNvjfTr6+geCAydugoHNr0PW8+WeOW5Six/rxnUvvO4l64wG+KgNhcpTqjK0htZacm4fO06Av1DkJmdBrOxGq7uXvD2DkaNvhplJXnIzkqhz2YHX58gJCXFo2uXjvD08YWozaPzISDUzlDpmtLDLQRyluP9z6Kw6WQTlJZVIO7yVny38xJWfLYAIW1Go7KsELkp16ChbWU0a+Dl1xD7F1w1Ld7mo1n3jkWMS9jujkSStLr/xdF9GmnJe6bi87rly/Y1HjG6U6Lxk5/aaePv58HeTofcMgtsWz0NZ69nIObECqRmFmH09OWIup0Of39nbPkojwLyHaic3oNZnwSVMZ4LquVC1AoiVRb1cCJiJxo3DkdGZgrcXD3h6OiC8rIylJYWoKgwh7JawJX37e1dkJeXiUaNmiEq6jJCm/WCMBBBag1h1lA2pcJsprfmOBW9e7mhhcsuXLprj6VrjyE2Lh4e9TuiuqIEBcnn8e2G1fhx/ftEchB2/PQD4graqN8dedf4zVE3n3NfZTsu3FBzmOuWa5cs+qT9nqwU5Hw2C11vFPSe7WqdZbyZGqaJ2H8EqxbPwLFda7B55RT0G/sJTuz4VFlwcnoOTh/bD0/tNVzYkIbez++C0PQEao5BLegz0mrmjzKgmi6G3KOHSSVwcnKnRc1l1lbDzs6elrManh7e8PT0g5kU6ezkgpqaSjqxJr7riYSHpBSzGgoMBRphSotc8H5NBB91Qu9xBxD5TTZa1C+CURck40q03i/jLDdkzLPhCG4xGNPGdsXiJQtw+sxdXLjXTOPrmGk8eb/D659ORy+ClX6lnPCT9msEyVVI7FlMe3nc2p8jhKpjc7Xqw7XVql5Dp2HEgLYYMmKygpTjOxZg4ISFuByVgO4k/Y4tbXB1mw5uLc8r7KLSX/sNYuRokg1h4Y7khHNo3NAPOdlJ8PMLQHlpMRxIQTXVVYp7YWVpgZqqSjg6u6O0pBCBAfWRnf0QoU382PcMYXjWwZJAlfYIUYabHLsEri0icWYj0NwtEukZRWSnYLQKC1A0W+KtQ9h5OAqdWjeGrY0KX+6tp2rRUK3ee86MV6ePWkNwVjwkDup2lBe/RpC8Nl/9EdO/2V/dbFS3XOMnP7bRwFiKD98cAycHa+zftQktuozHp18cwsxpQ9GxdUN07toKx9aZYBVyHEJ/l7ImmeCl5vxtUxCk8sD5C5EIb9OZFHEfXl71UFFRDksLK9jYWCkBM52OG6hiAI0+W3FJEXz9QnD/XizatO2BM7S3oHL7HYIejSOpyZxOGXULFg2O4Mg6M57xuYv0lIdISM5BZk4JXnp/G6ZMnoi+g0bDwsIaFfnR+GhzK/XIzrnGDYcNTVKOqGcQmpRDT/Dy+EJizBzEkKh78IgPCvKLRUaRv/pydCUstSb0798fk9/+Ac9wF3v2H46PZw3C1JlL0KB5d+xbngPrhoc4sZtclwzD/IZC+XddU2utKaxrkJZeRZYJVChGxn48PNwoe3Lh5ubOe6UKW3m4u6GysgTOzk4K0ioq2MclEOmZ1YRRDQnr6U3NrS/gXK7Dkkjav7IE3q4GtO31AnLyS1Cr16NF294oy7qOwsQIjB83CpcjryK1qJ66oqxY6O2HzPX1hTTGJJIUKnpMSoqxVHFZO2fFsUHLOjfNNL32RUtNflYCipLP4KNVB7Bh9SIaY2pkJV5Br7ELceHoDzixwQrdxuwiaVdy91IJ8+nIkdSjsvJD/J2rSE7OQHBwKMrKChRj0tPLD+mpCfD08oaFlQ46hlcL8gtgYDhWCu+yslIKYjOR5Y6kxHvw9/NC6DMdGWdLV1jy6YgyUyb5E5GOuLhrGJ6b3wQFaTdRv0k7JFzfgXFvfI070ZG4c2ErmvZ4gwqiBJvfjzeei/XTvtXj0EeO3YyLCFfBiaQgiSQpnGxzMWBGdVWpSMgOUj24cwUHdn6NAydu4caNG8hPvYZjh3dDZ+2CK1du4p0pdug24h2SO8MXpj9GDuHWsYTKHafOXEHHzoPY/wLCmvdRNI2PbxhyctNhY21BF2Qc/ALHws7WChnpDxEQ8Axi795G82f64vKls+jYaSgiTl7ljOUmS1HxR43C3ETzwaRDp2HvY+bgREX+Lfr4bZy9moCf17yCu5E/Kp27dGqH7Jwy3EoNUptqS0Suus+rfODAQ+KEuveRatv3Dww9eUMd0D60wvzDcX+1tZ0jOrdpiHmffIarF44gvPtENG/sC6egfgjxzMHCOU046AhaD9cJ5umUQ9hKU2ttFXckK6uKwjeMgbMSWNmGIiW1ApaWNhg+fBJ8/Fpj6aKXsHjBFATWa49Bzz7P2JEdNV4Z322G+w9KYecYioKCGhhripXg2mP4Tz1zTirjTcY6h2Le7BYIDTJi9rwv0b1dCFb/cFrZtIKiCny9eAK1qA5bTvip2zSqNJ+KsfQ58DmeI0y5AxqJIMlvaN8p7IXkzBpRVuOCh+nMNZQlY8gLy3Dn0s+YOO1dHNq5FruP3URR6ln8Y0Y1ND4fwUyBqFJwLCE8vUmVDQsP3Ik5hm5dGiM/5wqeae4FQ20S7RyqfU5BZ2mNwoKrcHHvADfPTijMu052s6Os11BYa5n9SEOrlt7IzTqHPj2b4eaNo1y4F1nvz6iI+yZtL300VJ5zsfptM4pz7qHD4LkIqeeB0a98iXoMvn256TSWz38dd2/fR2mNO4V5jWjVOmzKo9XQsCCChnVHUFJJ/S5+ruWq/Ze81FYWBuzcdQBxt64iKKwPencOxd6Imxg/aQa6dw5An8EMqwg3yp08dpcc+idNIgjOOHbiJrp2H40L54+gW7eBSLh3Ek0aSZVdBWGqgInObYC/F41NL5hMekVlC1GDpk088PB+BLp3fxbnzh5Gx67jEHEihjCdePw5guTcVGYqDuGMnoMGoW9HK0Rdv4kPPv0Sb08fjJSEO5g5uQdi4jNhqs7CseggtbdzqSqltH7HId0RzAEUBOGFIer+0QkqSy9XszH6oaPKWJmOwtIqXD65Gd9tXIsfth3Fe++/D2snf7w9llax03jFfajjUIL5k6bW2cNQnUdha4C1XRgOR9yHm/dAWsbX0bp1Z+6yL1QWwXBxa4La2hrlcHFrzJhZYz7zQWuaBDduXIWr1wDKn0RSVjAFuBnV5al8RyLpLxqpyGy4CzhOxJujq6BVVWHGyxOwbO1OfEFW+3DVfvz0zWfoO/xVnL5SpfJzUxmv3RO6+S+pB0rIkoLQNtyjT15hDQpKnVFQWM1d9Me3327Cms1n0atjI+z5bg68G3SFl00SBgzqzB4epJ4inv+cehT20nniZtQJdO4YSFZ5gFHDG7NfNYpLjfS7gONHliLy3CZs5EaUlJRTo1Rhw4b1vPed8qymVqCoxMA+eowc1pCsGY3u3Zrg6pVj1DOef8lmco5qcyn7O6N7r05oHWaNl1+aqhihC98ajB7tGqEk+zYaBjqgIDcbOaVuqrKyWnj61u/DTtC6uMAhr7ZRW3urKtxJC1bryxJxI+K0fAYZ12nQvB8yUmJpwPbE7CFU1279uCNUsUoaVHntj38U9nKk9rrD4PpoaLSVGDB4OqpKLzPxZ4sfSZktWk6Gj6sXmrfqR9Zrr8A6dy4MTq7OKK8qwE8/fot6DSxRXXYJA4dOJ7tUonV4Z6z84lt072P7x2P/+omkIj0pzm0g+re5hEtRjtizaT7dGIHNey5ThDSBd+MB8K7XGpfi09Wt6icju9IrPMDxobP6ue4ITSvQ+bjYGXEzwUbtEdQagS2fR/fhc3EyMh6x1w9h8KSFQFUCJj1rSZprRr7O5fAK8f16Gv9yLVmgujyN1rIe7t6tYK5K5zsVyMi4R1/LEUOe7YDUpF1IfLAPFy9swKmTETh79hQunN2g3Et8uANDhrSHi6MzMjMfsG8V7Z8sOLiF8lqF0oJ4qC1d/mXcf71BWSQ4Z3UTjO1rwbn4omnXGdBSQWxd9SL2Ho9BVvwRZn6NuBErVC52JmQUWXv17Y4wbZ+26vCHGWq1j7PalFtiq6kqTkFlIZN3adGIvnwQGdnLEBefCF83Ixo0bssd1HGwas7vz1W71DBqrQeuXdlO9gri+3qYhJGU54DExIdM5zjjmVbD8MwzzanJnKjhAnH0BF0FocJrr/SBiyfHMpGNNQ3om61DQsI9BDfpTEc2g1tTjp5ks8jI4xg07BVq06I/MRrr0KUS5GdhoRiL/q638CDHChPf3IgtzMcdOx8HR68wqKz94OLbAha6ZFNKjlrTKRxt1FpLq6ZllUBlrR3jNA8wZtQQRF2KwMO4KyjNicPUMV2QmXIfzUK4RufmDEWUcMQ/lz1ySnVv2OP0ufvo3KkvF5tD5Gj5xJK2TS4aBDeijoiHqSaT53zUMrFoY2MLG1tbXnNCvFf3LA7BIY2VPrKv9PphzEW7Dn1xPjKZ79X5cHLMP2+MIkmN5tQMDbzLqTiKFeTIPlejk/DJ4i/oRg1Dfm4WShgPL60QcHNxbKL2cLMPlvHjkmoblezUqXUDhIZ4Y9Haozhy9i58vZyhtnJFmyZUqbp6VMkUeH8hf6ToUZH0ywrvKXN2cA3lLhdSBlkzOVhFy1UGyIggY8WjnadsI0ZNJhMPBu4Z7+Z21z0zlMPNo7HSR/ZVaywpT2ho2vnTf7OmbXSNY/3ew1eG/e0PBxCmcmUN7RlnYzQUPk36o2nHCcjOL0dwoAfaNguAvqoEZTW2qtraWjARGqL2cLfz08CAwmIdnPw7YvywDvAO6Yp1C5/HwO5haNFrBsw1OQgLJkupPTloxW8Hfspf0gmFxh2XLp1Aj24NiS1mTSXWdLYoKUwie1nQEralrcOgl9L4TGm/psy6e2ZTLQ1Gawp1SxQXJBCGHd+U7xWjV/eWOHvuBOflUQe/Dsgf/wrOnS5PWAitbFMZXLyC0YDBuKQHd5RsbmJ6PgspLJFfbKGy1BpRobfxVaflW7pYUfbml1sw8JePmLg0NGrehbuowtxlezHx+eegL01EfX9OTGVL+UM76C9YTPaFsCELJKFtO2pLI6OA8p7akWGOO2gY7E4Yjytl/ng9/3zCyo4QD8qhOMJ4ZPswsti8RR9cj6Kxyv2QlPXnTc6pilO3QZCfAyoyI/HVsjdx4Ie5OL5zCRbMHoxvlk6mNVGIwnIrWvCM5JZYOqsranW2Fqy4qKjWqox6xnMTsnF292LEP8xGXOwdLF/xBZw9A1hNQd4XGu6UtEn+uNWxlxsKcqIVH8fGoT5ZopgdJEXY4OHDJMqUBrwuV9jqjyHVPZF4ldorODiYyKXTCWsegjAroLVyRlCgHZISzirOqEKlfPpHjUzGrioWY9lzbDMLJIzoPfJdLFl3DC/MXIaUjAK4+zVlaKSGFCTlstZabTBptHISRpMGOhsPjBvaDh5BbVBRVYuDWz7GSy+9QmEdD1tbB2VcZb5/NAPeV9iLrBgZeZrsFcY70kijmpWDmGsRczufi6IQYPRPufcnsOQj5R2+G8g+N2/lE0aNco+JOQ5WSN+sI02D83zR/d9gM7lJamh10v+zwYPkfFJ4J1yNioO9iz+uxiTzvgPtIy1NAIaD9RqNVCsKw9TqDVAZip8McuxcLFr3fhUpjDl7BDSjryTlxV+hh8OrLSgMTThzPgUrlk8EDNmPBDG7G7Iw990xsLGiPGOk8mmtjmJ+94TC3NrSEe+/O5IwMv+JWH0OQpr0wNoNR2CqLVaUgNyEv2pCxrk96uP7nw4hpL4PbkddREH2fRz8mfFx/76wqS+ptK6pZcGkmWQn2UzLWM+Aicvg6NsGAyigy6oFgkJaobKiEnp9nWaRe/BHTTGcLeyRkx6JsCb2SuyI28HXtUQ8N9xcBVc3H57LeE8im5TFGsTHz3lR954yiPbRs7r3pAXt7hnIvjXKO5TWSn816z47d/DAg3vHecvxyQZLWP/aJCyh+HJVDPU2bdYKW1e/hkO/rEV57l1UFyfCSL+R2CZHcVYak0krq0lZMGnnbE/pUlOp6tW1BaysbdCy2XxUs4hpxIBwtGvzBcqrW3A9Ru6enNjTBayy+6RCD08fsuZsCrwEVFMDWtu4cbEkVhkaMVfW2ZgyVMH5mvi3WlhDq1WxsIrhCbKAhgQmaIyaiRQNKVJpUvWbK6jR+LfUkpTMNVWFrA1QYcyY1+jnkf30j5RBXY9/+ZXFoSrGuwsZ67Zza4S9WxcjggJ6zVffKlb1q++uYpTMklpWI4gTlYOtsUYb4K4vvnhP5eliVyuqyopUMyf3wp7d+9BqbHe8+dZcvD6pO/nGgnGSKjTihIXKkppMCmq5G09pUsPrqFEoBJMeFsOkasagfCnXVM3JGRU7xyS3R2VHzWOtaB8Lvv/w/i06q3IDNLgbV4bGKmdSrRWjggx9mGi5U0VrSOUa5sTqFmrDGLMXg2d30LiJLTRUz/Rk/3BaknKkFpYCv6hEj9zUW1i/YSPTQLTOuVmjpq+k0GexlpomhV01NxbwdtQXa3PzyjNM8G/s7mxCTWkaCorKsWfrMni5O+DZmCNKKZyK6ZqY+yb0FNwlyEH+xBaizVKrd8KRo5fRp980PHiQgAfZglayMymyitShRc+eXbkJ+1mrSGwy/FBTU4sGDXqhvZ8VEclQRo0RkRcT2cdaMR6rq6sZdRyK8+cvEmm1isUt77m6qNGu/VQcP7YJXbo0gjXjWAzsPGXXHt2iigf9yJvxgtzYCBGRcUjLLuEGavDBG6ORnJHHcZfD2c4oysu1KlurqkxtcXHlQ61W19vRukJYuTTGR58fZIijMQ6diGLapRQpKYlwDOiFG/GXSMIpJPGO3KkcLuxpFETe0AbhyIELeG7kLLLJGzQWz8KFIYMSavqy8nIGxfyZxSihuo9lSseXG6tCCXNjOp2ZSJCRTuDAgf3IzEhkoN6Z4whkpGUwPMGd5uJTUzkfB0ciWoP79+8QQa051kxsWL8IEyYMIoLiCeEpIoBCUMUgPgxRuEpzypqZlcM71mBXwV1lzOU+beAf0oZyk6kdmzRRq7dEQmJ5grq6vCrW0V4Fe6tKePrVw6HDxzF95oc4FnES0bfjUVRcASPdhIfZDjAXMbWjGGqKFFUAP/5RBLSG8kEVjCkvvoPly5Yqj3RkHwcHJ8ohGplEqoenF7WamilnNyLODU5EgqMD8+z8V1VVRc+fcobvOThyosyuync8PDw5rpp9PenPaRRYtrZ2tM1IEWyrV6/CtJfmkon8JX8/EuLKo1/9EEFqev6ld+mxG5kd8UZV/h2wwg0TZm3EpbP78c7r41lTGQ9P1xrY26qQm1sarz5zxRzVwJuissas8XSsgr1bQzi4BtIMr0evPhETxo3Ga1NH4E5sFjObsUSAXpFDvxpZuVRJR1QTgHNnDjJ6WIZ357yHY0ePMsfuxvQOvXguUKejO8PvESqJBD3vyTyVnuaFmUJXy2cSMXXvWZC1jNAb9Iww8uBZIs6RSJMw5DsyJe3CXNr+/fswdepLfK8WEcd2cQ5BhKNYL7+ZolmmpCgXk+9fR4khEKn3zqHHqPn4+cB1LJ4zAk3pfy7/YhMCAn1RWWXQBHmbxbUYXFefuIg4P+earOJyDVqGVIvC3DT07dOd1VlO2L6Vkb3zp7Dk3SGorSrDT0foZZtiWVnhzcGlJqlrj6lHkHomvzAbw4YOUR5k52TRmrZT2MGatrt0RCXbVFRSc3GRxAwFpElZnFygYhSyZ00NMxfMi8ln0jrW8l2JVMmqMkdmRViSxWzp+RcVMiTCNm3qi5g85S1SUSCRZPk7KiLFq304Xjy2HCxDldEBU6ZMQfzty0pMOtDXVZG1uUwutm1uIYqIiwCX6tyj53BHnVSMUm/HrBtlNTZoHZxvLs28go2Lx8KWAk8mCsuL0pWJdxz0DjYfoGgvOkFHk6SsYEWZW92OaXwQw2Rcamoqftm1GxcjL6KqshrpaWlIT89Aaloq0nhIRKWny7hPHZvqdFolWSgRUEPBKxElqUVH+0YnVTqb1FrpGelMF1sofWX/zIxMBXYVBf/p06fxzbffsRIkD9euniWCGOf+NRWRQtUWAUDhIURcp63EaMDYwa2Rw2QAK2gxe+Ev6DzkLejN1mjbqMhcVG4NH/vMqLRSesSyRf+ifu2LFYPFwS0dDU71B4pnp6ygMmHtU0kl1yHE2SsPhGdIb2Hr30dEbGa1mLgtTDWsNK3eTdtvjxD6CGEyloh69eqJtm3aKH3kD8MXT67/VxekqCeg+/XrI9zd3YXRUEyjLqJubnKONSf4Tpy4sL2FsPPrKXzDhoqhU5aI1j2nsLr2c6V/nwmrWBE3WhzY0snwOXERvV09S+JGYdaP15iPvv+eSn/9ttmibzcvcfTUSVVGzotYuj4C6xn2qN98AKLO70TbIQuxbGsk+g75GWqHN4DaSO4U7Q+tFw4f2MZrDfr27Y0tWzajWVgzGpzWCrsUFOQjKzMTcXFxiI6ORlZWNvLy81BI9pAsI9uY0aNol3ytXM947VX8vH2Hci1Z0dXVBR7uHvDx8UbLli0RGhoKHybRZT5fspukvFu3YtC9ezeGZnOwf99WPMdYskqdQrYi61qEUoWuxyffUMZRiGfc2Uf5Z6R61+KN+Ts4bxU8W85Ct3aOIqsgTdsyRG9c8A/zUTkBqaspDGDOvtTs1JpDvj0a+gnz7PWhmuqsY/BmJdY55uD9vZ1ZVXYYy5fOZ0jHBzs+Ska/ydsZ8cujgWZASlIG7tzzwt49u3D02FEUF7OajCwkA2Dy/BgJUsBa00qXi7K0rIsOuji7MPWczRKXbDmfJ83b25vVHz4oKipU+ku5JG0gqekMhrqIgkSeTA5KC1wuxcHBgfJvGIaPGMmi0XTUbxDAjC6fsy7g0q7R6PpiObZt/4VulQbD+7WEW2B7pX6o19hFuHQlFuvnlpniUgzqd4bWRnp2Ot+VQNWSghQEXbt854cAn3o9nW2z4edaiXLr7ki6ug4HTt7Gw9R8zH/zWSxYfQDbDtzBO2sy0bffUmi81tLkiOS3XgItw6roE03F118v5qSpas20Rag15MQlZdUNw53gfSXjSQEsVbf0qS5evIQTJ89Qxkj/i6YKBXSv3j3RsUM7/mUkkk0U6pwqkS2/ApJSiZCU+8q1IKL4XI5Zwc8TKityKdgJyawncjpD5M7ER9+70x1hsdelWGxYPAnOvq1QVZZLOAy9FVfC24NmhH0BKny8VA9iT2xSHnDScj7yAENYtpcvDIr/7lCFr5uLs1iw2V9tJdKQG78fLMwmABpZbC37vs04UTzeG5POr3PeZYioK/FA9a8mq0nBq7ghXLgCVf7IxSh/8MzFaUOoCWloKpvuxUUwU0HnUK3jfdlkf/ph0hdTaSS8Anbn7Bj1VOqbjMk8y8iChPsYtnyPf0rNKn1FsowMi5gRymGuYtG8JViyIxirlszC8n+sxKQXXsF8lvDItmbzSbz55hysmBdizs/PUU0d6pzTd+L+JklJkB61Mk0JWpNP/8FDFbHO0tpZ1Tww3ezjwQAj+VSyiKebA0a8/AU1gT0e3DqDVu26Ye0BP5zbtZQ7V0ubxFXRDMJQwZhzLQ8uUE+/jUEtwXoeYSAS5N8sfnp/zkwWfccyMG+LKZOmYu+udSystERl6U3u6A2UFRzjAqvx+cr3sPOnlWQrZ/yw8WNcPLcHy5bMYWJRujkyz8WUtYQtx5Cw5ZhybDkHvSyZYWqctU1XD36KNQfroyb3Ak5H3kFSzEHs2v49dFZOeKbXLMz7eCmCm3VBM/9Es4WNi8pRf/hrIkfGYiTZkzbrmoknVehY49cT+qpzI67ZaWYNTzEbaO/0Gb8Mgc2HYM83sxlIa4fK3Jv80uYl2g0GzFgdhKKYkZRDTdjblRsnA+7SJuZO6oIgtPV4TVaiuyCbSmPPyo5iGoAqXLv0C9q3C2SufQxtkhmY+/4KZj5fZtRAUpuWKecW2L7rNmVOEV0RM+VUISOKJSys4sbSeZYwJWw5hhxLjikJR86B6Re+EkqjeRzGz3eBtWN9HDp6mt5/CT7bEIG7l3cz+BaHzNRYaBxb4vWhaeaTUXbq53uisMPzxnVyqjwkThQKkme5AnVGBj2L5D3LXN1cVfXc082tQq0opH/Cgxu7sfr708h5cBL7WS8U1m4IAhq2Rp6xBYa85YyahwOZWWhLCiEryPyTZUeoao6zYv4guWIQ7zOOLGPZoogU1J+hjWp06Po8bkZnMMW8A6OeC0fjRs5UAhMZ1GflKkMX9+LuYvBA5uFrsjDyub4Ib9mYdYQ9YMFgOljswGAEYQ/gGEc51hFedyJ8A++7sFirAwzJQzHsbRsUmlrBUl2mfLh3YPNHSGVYddV3J+HsaKMgrp5HCcIC0oStvYvavurA8oc5IDM94SwFUxJBskmsycMi/9bIGx9sqGg6qX+Fqd+bfhp/TzXuXf4JY1/7UvmeK7jjTE6EoUu1md9H1KK5+0VEbNDAov5eQiAy9Nvw6XvzkV1ggQ0rO/Czgw84eTuyBTOhGkm50pnkUFo/nuXeKPvDM5Eo4zryOfPuijxhRJJeJu+xyXgSaDyyekxGAVD4GV5/9wJc7A1YsGIeH00mqDJWB49C/5crcTO3M7w8rFFaXICChCP45ocdmPRce9RrMRyZybdg4zcA+xfeNW87Za1eONXuvmf47pYcgJN4Mql/qZmTMzBY6+Pi+/QNmXzrXrW5c2s31Y5d11QqfuvQPrwJztzIZfzWV1G9JiUArkVyoT8ORaRheNvDsHZ1xMZVn+CzXa1xO6cpjh2/jwCLragXUMZwTFsuLFDxvYRJyqg0yg1qEmY9ZDIQxkI67xTApELBa2HMJxpZTieTBXQ0VZogIofIK9+KiF8+wcvzqxAR1w5RiR6wLd+Fth39UfLgI/SfXo67xT3odOro86mVQiwHz1Bs2fAp59cUQwf1wIHTiZgzySxKSvPNbZvZqI/sPjD+TBTuc/0SB+TTuiYp5vdNbrFJf8V79Qf7Or3xbPgD46IdHbXXYooUb1pQjshCbtlkPWFxXrISDTRo/FHfPgajezIWTeRobTxZVsd0UkE1SlOO0MexxDuTtRjSvzWLCMgOumaE4EZksGqeGodkx0tJWcShYhYwMCc1oxQs0uI33KVCi8S+o1fw1U4G1TIbKZ9jOtoZqEyo18pz8e7IKOyNDMK9/FDK+Xuwdw1RPimXATEJRUM7LC81mrXZQLtwbyyccMG452oj7ZIxkRusWuW8Kl/hocgenpX2NATJexKLuqLboy69tqqm5bzxWabh8ztoakws17VmlI+UIz+ZTLy2BUPHv6sUYx7ZuRp+LSahnIUKzo70uCkspYVrqSrFuDFD8cWqz1Gafg4evkEY2scZg7uqiTQXeHo3poFBRFl4cFQmo2Sj6kctKYoCOi/nAS7dzMfxq2rsPJhD55RZVZcwbo40AJ3g6tdKEcxmOsKl5ZyXKEFRwj4s/3ILFi9ezC+IXJjKYWaXSFJTsJsE7SX6YvvmXzB9tt1X8+Us3R23Z3Z34KhylyTlSH5/0p6GIPlQIbPOz6DhD+tHXl34XbnjrJEVYsD74Wo75pS0OsZuSnPwweyJeHV8VwWY/Dh38edb+NEua3aoHOWHu7Iitm+f3vjl69nKOzHx6Xj5rdWIOvczF+cGv3rBsDRnwsGmGvYM7dhay7i0hvBZTG6wQmaeGgUVtqgWnihMucAqsck48fP7Ciz5M/b1r1g7fQmOHsEKhdQyRu3t5YGvP5uq1FPK72DfXLgPp8+eZTmNLzfSxMBbBY5+FmVeu8dG9cGLTuWvzf6lw6mriCO437DW40Hkzac1iUlNJIsgzh3f9fyM0Xbmjfu12L8oWpSyyElQJtRUFuNaTMqTvvwcEhWllBukUsVepKWsL03G6gUvKu8sWHMELZr449rRFTBVZfLbro8ZPDfBYNcFJaquiM0MYW2OP05Hu2D/6VqcuuWBXHSFhWsb1LJe8pVZ854gh18yKjC3r51BK57/SwMLH+S2W9q44t6ts3C0r6NED1d7XDp/iD4hv8sn1RcxnLxvUYzYdFgrXh5hTzvrl/GPkCNZ64ncUYA/+vkjBMnHkhe10+bjWOad3VPHDvRQbz4M86Elt0VZSQkfWjOEkcJUdQb4XSru3U9QwpVyprK4qrQwA75BdCo9HZW89ydvDKLhZomB4z+VsNGMnyOUJR/G0vfG4H7kGmTH7UJ+wkGUpJxAbcFNPneHsfwhVX4Zc2IafLVwIoPtzIgQ9uSxAxDebzatesZ/GEa1tLbnpshyGxZ8cvP4WSa/OrynlPxK341f09F8KMLBxbFix3GzeVgfD01J4p6XP/oKhzgVqSJ/I3fk/B63P2Kxx8/lWQIwJu7HK6lixPqfDueL10aYxIhPmlGfMMede538Dfg0aE+NwbkwKC+d0pTbBzH/00WYM72vAutqdDLenLcKV46uhYVTCNzrdUFRdhy+WrMKL4zsgLEz1jIpwYgmP3LZtOIFpY9TIO0exwCEBHnh4oFlymefmzeuRON2Y5Gb+RAGWtNmWs82jt6wtpU5MSnTaT7WliAr4SI8/JvAxNiVhnJp9/w75m/2qTCyv7u6vtjzRvAIrHm8NmWwP/j5Mwp63EWqFm2Dodjgqd/9wqtj/cWKn23UBxddNzXw4pc2Dm3h17ATDCbuYF2iVqnv0WnMT5DzJgNS7VrWw+Uja5SdbtL6WVgwOC6dVgsG5WTbsW4mayHn8muiF5m0+ye1q/lOZYXiFinVJtT9DKrVECFOSvhj2LAh8KArVFNVl+uXlASNDYJbDUZprTsaeBbi0KIbpi92WKqnjvRT+Rj2vPzvIkfO699BkHxPQVLT0dh09uBPzy542al4MT9GWzT5upEuCbKyyxk3pnAlUmRsuTDrHrr2Gib7YfysDVj98Wg4+bXBpLe+Z1qpAhXlrAsiu0mFUefRS21Pdf/okKVxYe2Hc3aWcKRwTWVFiGxDejdnQWYl647SkRF/DGH8vzy++2wCunV4BqX5SUw9WyhzkK5MRkYxZj6XgyUvXDYu/dlL89FLTqXZN38eGjYG3xCUwhUK0L/4qTNo/uKlR4/ltmqPX8GDiuy4g19+HNrhq4Ouvp52mea3R+eIa/ccVUkZKuWTgor8OFw7sZH2EZHGj21jU6qZjr6HmEi6LN8ehJ1HUxYJWPH/6XiAcaOHoVEDL/y075ryRU5pWTXllhM/VQjH9l/20Zapj+L8FFTxy8WerLh9pm1PfP/le8yN2eDy8W8Vc2PG2wthaSczH1bIyatBPa9KfPN2jLmsrFBciK+n+cer5lsff7Jv8HvrcUGugUedwfVoYX92+ndk0O/7PzambIy36312/F6TmbtPmTCme57xQXaAZs2+QFVmdiWr1Nwx66UhGMeCrMdtzmd7cOjYBTBpwMCZHVLvHMZRRiK78fMAKTset0VfHcG81wag05AP8DAlm1Tkh+x7R3D+5D60bEo341dt2tzvsX3bVli5d4KLbRmpJl2E+qaZtp9x1w7ppsHAsNh12mapc9lFhgEez/1XEP788p+z+vP3fv9UsqYiKH5ciL49Bw9c/vV+3TPV5aXo17bCeD0xQL1+h0qdlhCtqNhhY17GNqpk2QZMXomom7fh7tMQyTF7cenMXrQI9cfzM9eRxZhVpbzZv4m+G1tIu4moMjnwGw03ypgyfgYRiT4DR+GVSQNZHZ+FL9duRE5mEsJad8WobmmiQ8N00/HrtlpLWxe8PLjmbuSho3P4ceRRBVidOPmncHt0869O/18ESbiyr0SUVJFWVTcwI7Vm0Fs/ndT6mGtL0a5plamwygP7zrioT55NUFWXpCOo+VC6BQbWF7rAylKHzIQLNBp3oAHrA3/fZi/cgc2bvoNPcCfFUhc0PmtZYZKTcgu1tK+smDjs2C5AjO1fY3a1yUV0go1GaJ0xvo8+x8d85HOnroqWqiZcSTUSMdJU+o/bf4Ogx4M9IdvmDeBx4gf19CJ1z6knbtgGZufVIsC1FAFeWmNSroPqfLStOiXfTZVXaoPKGlZGUq3r+N+R6WjlSz9MSyErg+oV/EpZpn7sfTspJoQMOVtbGuDtrEerxrWiRb1cs59bkcjON2mT8x0Y0LNE79YV6S6mC9/3maJffzeZNmZdezK3x5P9T89/B4LkmBKOnIwi/GT1/o5FGNG4VaOJiUX1uly/q9XKYnJXe/43XdbMJliqTUUVNgyO2aroTqjySjQoKTOrZCxebrOdjY6fg9sJe4tyuDrUCnubSuFiV0X1btYUlqtZt2QDWztLtGlqNDVwfhgZH52wdeyH2FXMHB+7y/bY+Pt/UU0diLrfvwtBj2FKeI/ZTrn34hA0emOcuq+bX0Dv3PKA8NQCS9/UHLVSh6znxxqWOgM/oKPvpha0ieqmozcImg38T97odddQoFsyC+Jop0Kgh0CAe22Wh31qVGlu2smVm83HNx3EvceD8/xfsdOv4Dy5/LsR9BiwhPuYvJ/sovwedGQnNG0VhtY2jvZNWoY6hFRW2/hkFlu6lFVprQ1GJZpGVjOZ7K0M1X6uhmJ7i6qs6HulCRWllfFRd803dl9EbFYWP0z9Z3vqWP98/N9d/R/aPu8ZpZEAMwAAAABJRU5ErkJggg==';

  const uploadImage = () => {
    const task = storageRef.putString(dataURL, storage.StringFormat.DATA_URL);
    task.on('state_changed', (taskSnapshot) => {
      console.log(
        `${taskSnapshot.bytesTransferred} transferred out of ${taskSnapshot.totalBytes}`,
      );
    });
    task.then((imageSnapshot) => {
      console.log('Image Uploaded Successfully');
      storage()
        .ref(imageSnapshot.metadata.fullPath)
        .getDownloadURL()
        .then((downloadURL) => {
          console.log(downloadURL);
          setAllImages((allImages) => [...allImages, downloadURL]);
        });
    });
  };

  const renderImages = (item) => {
    return (
      <Image
        source={{uri: item.item}}
        key={item.index}
        style={{
          width: Dimensions.get('window').width / 5,
          height: Dimensions.get('window').width / 5,
        }}
      />
    );
  };

  const getAllImages = () => {
    const ref = storage().ref('images');
    ref.list().then((result) => {
      setAllImages([]);
      result.items.forEach((itemsRef) => {
        itemsRef.getDownloadURL().then((downloadURL) => {
          setAllImages((allImages) => [...allImages, downloadURL]);
          //save the image path to Realtime database
          database().ref('imageGallery').update({
            imageURL: downloadURL,
          });
        });
      });
    });
  };

  return (
    <SafeAreaView style={{flex: 1}}>
      <View style={styles.container}>
        <Text style={styles.introText}>Cloud Storage Usage examples</Text>
        <TouchableOpacity
          style={styles.buttonStyle}
          onPress={() => uploadImage()}>
          <Text style={styles.buttonText}>Upload Image</Text>
        </TouchableOpacity>

        <TouchableOpacity
          style={styles.buttonStyle}
          onPress={() => getAllImages()}>
          <Text style={styles.buttonText}>Get Image LIbrary</Text>
        </TouchableOpacity>
      </View>
      <View style={styles.galleryContainer}>
        <Text style={styles.introText}>Gallery View</Text>
        <FlatList
          data={allImages}
          horizontal={false}
          numColumns={4}
          keyExtractor={(item, index) => index.toString}
          renderItem={renderImages}
        />
      </View>
    </SafeAreaView>
  );
}

const styles = {
  container: {
    margin: 10,
    padding: 15,
  },
  introText: {
    fontWeight: 'bold',
    textAlign: 'justify',
    marginBottom: 15,
  },
  buttonStyle: {
    borderRadius: 3,
    padding: 15,
    marginBottom: 15,
    backgroundColor: 'coral',
    justifyContent: 'center',
    alignItems: 'center',
  },
  buttonText: {
    fontSize: 16,
    fontWeight: 'bold',
    color: '#fff',
  },
  galleryContainer: {
    marginTop: 15,
    backgroundColor: '#fff',
    padding: 15,
  },
};
